FROM ubuntu:20.04

# Get a version of Python 3.8
RUN apt-get update && apt-get install -y python3.8 python3-pip

# Copy the required packages to the container
COPY req_files/wineguard_packages.txt ../tmp/wineguard_packages.txt

# Install the required packages
RUN pip install -r ../tmp/wineguard_packages.txt

# Remove the temp directory
RUN rm -r ../tmp/

# Copy and install the sdf package
COPY . /app/SoftwareDefinedFarm
WORKDIR /app/SoftwareDefinedFarm
RUN pip install -e .

# Move to the Wineguard directory
WORKDIR /app/SoftwareDefinedFarm/sdf/wineguard

# Run the command to start the compute module when the container is started. 
#CMD ["python3", "compute_main_wineguard.py", "-c", "wineguard_compute_ks_config.json"]
CMD ["sleep", "4h"]
